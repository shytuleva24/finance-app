<div class="form-field">
  <label [for]="inputId()" class="form-label">
    {{ label() }}
  </label>
  <div class="password-input-wrapper">
    <input
      [id]="inputId()"
      [type]="type()"
      [placeholder]="placeholder()"
      [autocomplete]="autocomplete()"
      [formControl]="control()"
      [attr.aria-invalid]="hasError() ? 'true' : 'false'"
      [attr.aria-describedby]="hasError() ? inputId() + '-error' : undefined"
      class="form-input password-input"
    />
    <button
      type="button"
      (click)="togglePasswordVisibility()"
      class="password-toggle"
      [attr.aria-label]="showPassword() ? 'Hide password' : 'Show password'"
      tabindex="-1"
    >
      @if (showPassword()) {
        <img ngSrc="assets/images/icon-hide-password.svg" fill alt="" aria-hidden="true" />
      } @else {
        <img ngSrc="assets/images/icon-show-password.svg" fill alt="" aria-hidden="true" />
      }
    </button>
  </div>
  @if (hasError()) {
    <p [id]="inputId() + '-error'" class="form-error" role="alert">
      @if (control().hasError('required')) {
        {{ errorMessages()['required'] || 'This field is required' }}
      } @else if (control().hasError('minlength')) {
        {{ errorMessages()['minlength'] || 'Password must be at least 8 characters' }}
      } @else if (control().hasError('passwordMismatch')) {
        {{ errorMessages()['passwordMismatch'] || 'Passwords do not match' }}
      }
    </p>
  }
</div>
